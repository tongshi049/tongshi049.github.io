<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  

  
  <title>Study Notes - SQL &amp; MySQL &amp; MyBatis (2) | TongTong Shi&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="MySQL MySQL is an open-source relational database management system (RDBMS). It is popular used in many websites. Java JDBC provides a standard interface to interact with any relational databases. In">
<meta name="keywords" content="Database,MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="Study Notes - SQL &amp; MySQL &amp; MyBatis (2)">
<meta property="og:url" content="http://yoursite.com/2019/08/14/sql-notes-3/index.html">
<meta property="og:site_name" content="TongTong Shi&#39;s Blog">
<meta property="og:description" content="MySQL MySQL is an open-source relational database management system (RDBMS). It is popular used in many websites. Java JDBC provides a standard interface to interact with any relational databases. In">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2019/08/14/sql-notes-3/jdbc_conn_flow.png">
<meta property="og:updated_time" content="2019-08-14T20:13:49.918Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Study Notes - SQL &amp; MySQL &amp; MyBatis (2)">
<meta name="twitter:description" content="MySQL MySQL is an open-source relational database management system (RDBMS). It is popular used in many websites. Java JDBC provides a standard interface to interact with any relational databases. In">
<meta name="twitter:image" content="http://yoursite.com/2019/08/14/sql-notes-3/jdbc_conn_flow.png">
  
    <link rel="alternate" href="/atom.xml" title="TongTong Shi&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
</html>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">TongTong Shi&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-sql-notes-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/14/sql-notes-3/" class="article-date">
  <time datetime="2019-08-14T16:17:35.000Z" itemprop="datePublished">2019-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Study Notes - SQL &amp; MySQL &amp; MyBatis (2)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> MySQL</h3>
<p><font color="mediumspringgreen"><strong><a href="https://www.mysql.com/" target="_blank" rel="noopener">MySQL</a></strong></font> is an open-source relational database management system (RDBMS). It is popular used in many websites. <strong>Java JDBC</strong> provides a standard interface to interact with any relational databases. In this post, I will introduce how to use <strong>JDBC</strong> to interact with <strong>MySQL</strong> databases.</p>
<a id="more"></a>
<h4 id="font-colordodgerblue1-what-is-jdbcfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue1-what-is-jdbcfont"></a> <font color="dodgerblue">1. What is JDBC?</font></h4>
<p><strong>JDBC</strong> API provides a standard interface for interacting with any relational database management systems (RDBMS). It consists of the following main components:</p>
<ul>
<li><strong><font color="MEDIUMSLATEBLUE">JDBC Driver</font></strong>: a set of Java classes that implement JDBC interfaces for interacting with database. It translates JDBC calls into MySQL specificcalss and sends the calls directly to a specific database. Almost all database vendors provide JDBC drivers. E.g. <code>com.mysql.cj.jdbc.Driver</code>.</li>
<li><strong><font color="MEDIUMSLATEBLUE">Connection</font></strong>: the most important component of JDBC. In a Java application, we first <em>load a <strong>JDBC Driver</strong></em> and then <em>establist a connection to the database</em>. Through the <strong>Connection object</strong>, we can interact with the database e.g., <em>creating a <strong>Statement</strong> to execute <strong>SQL queries</strong> against tables.</em> More than one connection can be opened to a database at a time.</li>
<li><strong><font color="MEDIUMSLATEBLUE">Statement</font></strong>: to <em>execute a SQL query, e.g. SELECT, INSERT, UPDATE, DELETE</em>, we need a <strong>Statement object</strong>. <strong>Statement ojbect</strong> is created through the <strong>Connection object</strong>. JDBC provides several types of statements for different purposes such as <strong>PreparedStatement, CallableStatement</strong>.</li>
<li><strong><font color="MEDIUMSLATEBLUE">ResultSet</font></strong>: After querying data from the database, we get a <strong>ResultSet object</strong>. The <strong>ResultSet object</strong> provides a set of API allowing us to traverse result of the query.</li>
</ul>
<p><font color="MEDIUMTURQUOISE">The typical flow of using JDBC is as follows:</font></p>
<ul>
<li>Load the <strong>JDBC Driver</strong> and create a <strong>connection</strong> to the database;</li>
<li>Create a <strong>Statement</strong> and execute the <strong>query</strong> to get a <strong>ResultSet</strong>;</li>
<li>Traverse and process the <strong>ResultSet</strong>;</li>
<li>Close the <strong>ResultSet</strong>, <strong>Statement</strong> and <strong>Connection</strong>.</li>
</ul>
<img src="jdbc_conn_flow.png" width="70%" height="70%">
This image is from <a href="http://www.mysqltutorial.org/jdbc-overview/" target="_blank" rel="noopener">source</a>
<h4 id="font-colordodgerblue2-use-mysql-workbench-to-create-rdbmsfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue2-use-mysql-workbench-to-create-rdbmsfont"></a> <font color="dodgerblue">2. Use MySQL WorkBench to create RDBMS</font></h4>
<h4 id="font-colordodgerblue3-connect-to-mysql-using-jdbc-driverfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue3-connect-to-mysql-using-jdbc-driverfont"></a> <font color="dodgerblue">3. Connect to MySQL Using JDBC Driver</font></h4>
<ul>
<li>To avoid hard coding database parameters in the code, use a Java properties file to store them.</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MySQL DB parameters</span></span><br><span class="line"><span class="attr">user</span> = <span class="string">root</span></span><br><span class="line"><span class="attr">password</span> = <span class="string">pw</span></span><br><span class="line"><span class="attr">url</span> = <span class="string">jdbc:mysql://localhost:3306/db_name?useUnicode=true&amp;characterEncoding=utf8</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>Import three classes, <strong>SQLException</strong>, <strong>DriverManager</strong>, and <strong>Connection</strong> from <code>java.sql.*</code> package.</p>
</li>
<li>
<p>Create a class for handling connection creation. Call the <code>getConnection()</code> method of the <code>DriverManager</code> class and get the Connection object.</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  System.out.println(e.getMessage());</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">  	<span class="keyword">if</span> (conn != <span class="keyword">null</span>) conn.close();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">  	System.out.println(ex.getMessage());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="font-colordodgerblue4-query-data-from-mysql-using-jdbcfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue4-query-data-from-mysql-using-jdbcfont"></a> <font color="dodgerblue">4. Query data from MySQL using JDBC</font></h4>
<ul>
<li>To query data from MySQL, first need to establish a connection to MySQL using Connection object.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(url, username, password);</span><br></pre></td></tr></table></figure>
<ul>
<li>Or we can develop a utility class to handle the connection.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = MySQLJDBCUtil.getConnection();</span><br></pre></td></tr></table></figure>
<ul>
<li>Then, create a Statement object. For querying data, we just need to use the Statement object as follows:</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Statement stmt = conn.getStatement();</span><br></pre></td></tr></table></figure>
<ul>
<li>Next, we can use the created Statement object to execute MySQL queries like the following:</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"SELECT * FROM `tb_product`"</span>;</span><br><span class="line">ResultSet rs = stmt.executeQuery(sql);</span><br></pre></td></tr></table></figure>
<ul>
<li>Use the methods provided by ResultSet object to traverse and process data.
<ul>
<li><code>next()</code> method returns true and move ot the next row in the ResultSet if there are rows available, otherwist it returns false.</li>
<li><code>getDataType()</code>method: get column data of the current row. Pass the column name or column index.</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">  System.out.println(rs.getString(<span class="string">"product_name"</span>) + <span class="string">"\t"</span> + rs.getString(<span class="string">"product_desc"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Last, close the ResultSet and Statement objects when completing traversing the data by calling <code>close()</code> method.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  rs.close();</span><br><span class="line">  stmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">  System.out.println(e.getMessage());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>From Java 7, there is another nice statement called <code>try-catch-resources</code>. It is automatically calls the <code>close()</code> method of Connection object once program finishes. So we don’t have to explicitly do it.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String sql = String sql = <span class="string">"SELECT * FROM `tb_product`"</span>;</span><br><span class="line"><span class="keyword">try</span> (Connection conn = MySQLJDBCUtil.getConnection();</span><br><span class="line">	 Statement stmt = conn.getStatement();</span><br><span class="line">	 ResultSet rs = stmt.executeQuery(sql)) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// loop through the result set</span></span><br><span class="line">  <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">  	System.out.println(rs.getString(<span class="string">"product_name"</span>) + <span class="string">"\t"</span> + rs.getString(<span class="string">"product_desc"</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  System.out.println(e.getMessage());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="font-colordodgerblue5-update-data-into-table-using-jdbc-preparedstatementfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue5-update-data-into-table-using-jdbc-preparedstatementfont"></a> <font color="dodgerblue">5. Update data into table using JDBC PreparedStatement</font></h4>
<p><strong><font color="MEDIUMTURQUOISE">PreparedStatement</font> interface</strong></p>
<p>This interface extends the <strong>Statement</strong> interface. We can use any statement such as <code>SELECT</code>, <code>INSERT</code>, <code>DELETE</code>, <code>UPDATE</code> with this interface. It provides some more advaced features as follows:</p>
<ul>
<li>Add parameters into SQL statement using placeholders in the form of <strong>question marks(?)</strong>. This helps avoid SQL injection.</li>
<li>Reuse the PreparedStatement with new parameters in case you need to execute the SQL statement multiple times with different parameters.</li>
<li>Help increase performance of executed statement by precompiling the SQL statment.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  String sqlUpdate = <span class="string">"UPDATE tb_product SET product_name = ?"</span> + </span><br><span class="line">                   <span class="string">"WHERE product_id = ?"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> (<span class="comment">// Step 1: get Connection Object</span></span><br><span class="line">       Connection conn = MySQLJDBCUtil.getConnection();</span><br><span class="line">       <span class="comment">// Step 2: get PreparedStatement Object</span></span><br><span class="line">       PreparedStatement pstmt = conn.getPreparedStatement(sqlUpdate)) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Step 3: supply values for placeholders one-by-one using setYYY() method where YYY is the datatype of the placeholder.</span></span><br><span class="line">    String product_name = <span class="string">"phone"</span>;</span><br><span class="line">    <span class="keyword">int</span> product_id = <span class="number">10001</span>;</span><br><span class="line"></span><br><span class="line">    pstmt.setString(<span class="number">1</span>, product_name);</span><br><span class="line">    pstmt.setInt(<span class="number">2</span>, product_id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Step 4: execute update</span></span><br><span class="line">    <span class="keyword">int</span> rowAffected = pstmt.executeUpdate();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reuse pstmt</span></span><br><span class="line">    String product_name = <span class="string">"laptop"</span>;</span><br><span class="line">    <span class="keyword">int</span> product_id = <span class="number">10002</span>;</span><br><span class="line"></span><br><span class="line">    pstmt.setString(<span class="number">1</span>, product_name);</span><br><span class="line">    pstmt.setInt(<span class="number">2</span>, product_id);</span><br><span class="line">    <span class="keyword">int</span> rowAffected = pstmt.executeUpdate();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">  	System.out.println(e.getMessage());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="font-colordodgerblue6-insert-data-into-table-using-jdbc-preparedstatementfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue6-insert-data-into-table-using-jdbc-preparedstatementfont"></a> <font color="dodgerblue">6. Insert data into table using JDBC PreparedStatement</font></h4>
<p><strong>Example</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insert</span> <span class="params">(String productName, String productDesc)</span> </span>&#123;</span><br><span class="line">  ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">int</span> productId = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  String sql = <span class="string">"INSERT INTO tb_product (product_name, product_desc)"</span> + </span><br><span class="line">               <span class="string">"VALUES (?, ?)"</span>;</span><br><span class="line">  <span class="keyword">try</span> ( <span class="comment">// get Connection Object</span></span><br><span class="line">  	    Connection conn = MySQLJDBCUtil.getConnection();</span><br><span class="line">  	    <span class="comment">// get PreparedStatement Object</span></span><br><span class="line">  	    PreparedStatement pstmt = conn.getPreparedStatement(sql, Statement.RETURN_GENERATED_KEYS);) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// set parameters</span></span><br><span class="line">    pstmt.setStirng(<span class="number">1</span>, <span class="string">"Computer"</span>);</span><br><span class="line">    pstmt.setStirng(<span class="number">2</span>, <span class="string">"Lenovo"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// execute sql</span></span><br><span class="line">    <span class="keyword">int</span> rowAffected = pstmt.executeUpdate();</span><br><span class="line">    <span class="keyword">if</span> (rowAffected == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// get product id</span></span><br><span class="line">      rs = pstmt.getGeneratedKeys();</span><br><span class="line">      <span class="keyword">if</span> (rs.next()) productId = rs.getInt(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">      System.out.println(ex.getMessage());</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(rs != <span class="keyword">null</span>)  rs.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">      System.out.println(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> productId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="font-colordodgerblue6-jdbc-transactionfont"><a class="markdownIt-Anchor" href="#font-colordodgerblue6-jdbc-transactionfont"></a> <font color="dodgerblue">6. JDBC Transaction</font></h4>
<p><strong><font color="MEDIUMSLATEBLUE">What is transaction &amp; Why Transaction</font></strong></p>
<p>A <strong>Transaction</strong> is a unit of work that you want to treat as <em>“a whole”</em>. It has to either happen in full or not at all. A classical example is transfering money from one bank account to another. First withdraw the amount from the source account, and then deposit it to the destination account. The operation has to succeed in full. If get failed in one step, the monry will be lost!</p>
<p><strong>Transaction</strong> in db has two main purposes:</p>
<ul>
<li>To provide <strong>reliable</strong> units of work that <em>allow correct recovery from failures</em> and keep a database consistent even in cases of system failure, when execution stops (completely or partially) and many operations upon a database remain uncompleted, with unclear status.</li>
<li>To provide <strong>isolation</strong> between programs accessing a database <strong>concurrently</strong>. If this isolation is not provided, the programs’ outcomes are possibly erroneous.</li>
</ul>
<p>A <strong>transaction</strong> in a db must maintain <strong>A</strong>tomicity, <strong>C</strong>onsistency, <strong>I</strong>solation, and <strong>D</strong>urability (<strong>ACID</strong>).</p>
<p><strong><font color="MEDIUMSLATEBLUE">How to commit and rollback a transaction in JDBC</font></strong></p>
<ul>
<li>Setting auto-commit mode: by default it is set to <em>true</em>. So the changes will be applied to the database once the statement successfully executed. In case, we want to control when to commit the transaction, we need to do first set auto-commit to be <em>false</em>.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">conn.setAutoCommit(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>Committing and rolling back a transaction: once the auto-commit mode is set to false, we can commit or rollback the transaction.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (Connection conn = DriverManager.getConnection(url, user, password);) &#123;</span><br><span class="line">  conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">  <span class="comment">//operations e.g insert, update, delete</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// commit the transaction</span></span><br><span class="line">  conn.commit();</span><br><span class="line">&#125; <span class="keyword">catch</span>(SQLException e) &#123;</span><br><span class="line">  conn.rollback();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/14/sql-notes-3/" data-id="ck0ecke5101gmnove25bqwauh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Database/">Database</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/15/leetcodeq1054/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Distant Barcodes
        
      </div>
    </a>
  
  
    <a href="/2019/08/12/sql-nodes-2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Study Notes - SQL &amp; MySQL &amp; MyBatis (1)</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 15.42px;">Angular</a> <a href="/tags/Array/" style="font-size: 17.5px;">Array</a> <a href="/tags/BFS/" style="font-size: 16.67px;">BFS</a> <a href="/tags/BST/" style="font-size: 12.5px;">BST</a> <a href="/tags/Backtracking/" style="font-size: 16.25px;">Backtracking</a> <a href="/tags/Binary-Search/" style="font-size: 15.83px;">Binary Search</a> <a href="/tags/Binary-Search-Tree/" style="font-size: 10.42px;">Binary Search Tree</a> <a href="/tags/Bucket-Sort/" style="font-size: 10.83px;">Bucket Sort</a> <a href="/tags/Cantor-Unfold/" style="font-size: 10px;">Cantor Unfold</a> <a href="/tags/Cat1-Cat1-1/" style="font-size: 10px;">Cat1,Cat1.1</a> <a href="/tags/Cat2/" style="font-size: 10px;">Cat2</a> <a href="/tags/Cat3/" style="font-size: 10px;">Cat3</a> <a href="/tags/Combination/" style="font-size: 12.92px;">Combination</a> <a href="/tags/Counting-Sort/" style="font-size: 10.83px;">Counting Sort</a> <a href="/tags/DFS/" style="font-size: 17.92px;">DFS</a> <a href="/tags/DP/" style="font-size: 19.58px;">DP</a> <a href="/tags/Data-Structure/" style="font-size: 10px;">Data Structure</a> <a href="/tags/Database/" style="font-size: 11.25px;">Database</a> <a href="/tags/Design/" style="font-size: 15.42px;">Design</a> <a href="/tags/Design-Pattern/" style="font-size: 10.83px;">Design Pattern</a> <a href="/tags/Disjoint-Set/" style="font-size: 14.17px;">Disjoint Set</a> <a href="/tags/Divide-and-Conquer/" style="font-size: 10px;">Divide and Conquer</a> <a href="/tags/Graph/" style="font-size: 10px;">Graph</a> <a href="/tags/Greedy/" style="font-size: 18.75px;">Greedy</a> <a href="/tags/HashTable/" style="font-size: 18.33px;">HashTable</a> <a href="/tags/Heap/" style="font-size: 12.92px;">Heap</a> <a href="/tags/Integer-Overflow/" style="font-size: 10.42px;">Integer Overflow</a> <a href="/tags/Java-Baisc/" style="font-size: 10px;">Java Baisc</a> <a href="/tags/Java-Basic/" style="font-size: 11.67px;">Java Basic</a> <a href="/tags/KMP/" style="font-size: 10px;">KMP</a> <a href="/tags/KMP-algorithm/" style="font-size: 10px;">KMP algorithm</a> <a href="/tags/LeetCode/" style="font-size: 20px;">LeetCode</a> <a href="/tags/Linked-List/" style="font-size: 11.25px;">Linked List</a> <a href="/tags/LinkedList/" style="font-size: 10.83px;">LinkedList</a> <a href="/tags/LintCode/" style="font-size: 16.25px;">LintCode</a> <a href="/tags/Math/" style="font-size: 19.17px;">Math</a> <a href="/tags/Memorization/" style="font-size: 11.67px;">Memorization</a> <a href="/tags/Merge-Sort/" style="font-size: 10px;">Merge Sort</a> <a href="/tags/Monotonous-Stack/" style="font-size: 14.17px;">Monotonous Stack</a> <a href="/tags/Multiplication/" style="font-size: 10.42px;">Multiplication</a> <a href="/tags/MyBatis/" style="font-size: 12.5px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 10.42px;">MySQL</a> <a href="/tags/MySql/" style="font-size: 10px;">MySql</a> <a href="/tags/Number-Theoretic-Algorithm/" style="font-size: 10px;">Number-Theoretic Algorithm</a> <a href="/tags/OOD/" style="font-size: 10px;">OOD</a> <a href="/tags/PHP/" style="font-size: 10.42px;">PHP</a> <a href="/tags/Partition/" style="font-size: 11.25px;">Partition</a> <a href="/tags/Permutation/" style="font-size: 10.83px;">Permutation</a> <a href="/tags/Project/" style="font-size: 15px;">Project</a> <a href="/tags/PropertyPlaceholderConfigurer/" style="font-size: 10px;">PropertyPlaceholderConfigurer</a> <a href="/tags/Queue/" style="font-size: 10px;">Queue</a> <a href="/tags/Quick-Select/" style="font-size: 10px;">Quick Select</a> <a href="/tags/Recursion/" style="font-size: 12.08px;">Recursion</a> <a href="/tags/Recurtion/" style="font-size: 10px;">Recurtion</a> <a href="/tags/Reflection/" style="font-size: 10px;">Reflection</a> <a href="/tags/SQL/" style="font-size: 10.42px;">SQL</a> <a href="/tags/SSM/" style="font-size: 12.08px;">SSM</a> <a href="/tags/Sliding-Window/" style="font-size: 13.75px;">Sliding Window</a> <a href="/tags/Sort/" style="font-size: 13.33px;">Sort</a> <a href="/tags/Spring/" style="font-size: 12.5px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 12.92px;">Spring Boot</a> <a href="/tags/Spring-Security/" style="font-size: 10.42px;">Spring Security</a> <a href="/tags/SpringMVC/" style="font-size: 12.08px;">SpringMVC</a> <a href="/tags/Stack/" style="font-size: 17.08px;">Stack</a> <a href="/tags/String/" style="font-size: 16.25px;">String</a> <a href="/tags/Sweep-Line/" style="font-size: 10.42px;">Sweep Line</a> <a href="/tags/Thread/" style="font-size: 11.67px;">Thread</a> <a href="/tags/Top-Interview-Qs/" style="font-size: 11.25px;">Top Interview Qs</a> <a href="/tags/Topology-Sorting/" style="font-size: 11.67px;">Topology Sorting</a> <a href="/tags/Tree/" style="font-size: 18.75px;">Tree</a> <a href="/tags/Trie/" style="font-size: 11.25px;">Trie</a> <a href="/tags/Two-Pointers/" style="font-size: 16.25px;">Two Pointers</a> <a href="/tags/Union-Find/" style="font-size: 14.58px;">Union Find</a> <a href="/tags/backtracking/" style="font-size: 10.42px;">backtracking</a> <a href="/tags/gcd/" style="font-size: 10px;">gcd</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/09/10/php-pdo/">PHP Study Notes - PDO</a>
          </li>
        
          <li>
            <a href="/2019/09/10/php-study-notes/">PHP Study Notes - Overview</a>
          </li>
        
          <li>
            <a href="/2019/08/15/leetcodeQ1072/">Flip Columns For Maximum Number of Equal Rows</a>
          </li>
        
          <li>
            <a href="/2019/08/15/leetcodeQ1080/">Insufficient Nodes in Root to Leaf Paths</a>
          </li>
        
          <li>
            <a href="/2019/08/15/leetcodeQ386/">Lexicographical Numbers</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <span id="footer-info" class="inner">
      &copy; 2019 Tong Shi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </span>
  </div>
  <div id="analysis" style="text-align:center;">
  <span id="busuanzi_container_site_uv">Total visitors: <span id="busuanzi_value_site_uv"></span>persion-time</span>
	<span id="busuanzi_container_site_pv">
      Total visits: <span id="busuanzi_value_site_pv"></span> times</span>
  </div>
</footer>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>